pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--jump 'n' slash
--designed by joseph turzitti
--programmed by henry holman

#include debug.p8
#include player.p8
#include rooms.p8
#include sword.p8
#include enemy.p8
#include util.p8
#include designer_controls.p8

f = 1 -- frame count

function _init()
	init_rooms()
	init_player()
	init_sword()
	init_enemies()

	set_state_game()
end

function set_state_game()
	_update60 = update_game_state
	_draw = draw_game_state
end

function update_game_state()
	p1_update()
	sword_update()
	enemies_update()
	update_room()
end

function draw_game_state()
	cls() -- clear screen

	draw_room(debug_all)
	enemies_draw()
	p1_draw(debug_all)
	sword_draw(debug_all)

	f += 1 -- increment frame counter
end

-->8
--tab 1: reference

--[[
sprite flags
------------

num | hex  | color  | meaning
---------------------------
 0  | 0x1  | red    | hurts player
 1  | 0x2  | orange |
 2  | 0x4  | yellow | 
 3  | 0x8  | green  | player can land on top of
 4  | 0x10 | blue   | player cannot pass horizontally thru sides
 5  | 0x20 | gray   | player cannot pass upwards thru bottom
 6  | 0x40 | pink   |
 7  | 0x80 | tan    |	destructible
--]]

--[[
sfx reference
-------------

num | description
-----------------
 0  | death
 1  | 
 2  | 
 3  | 
 4  | 
 5  | 
 6  | 
 7  | 
 8  | 
 9  | 
 .
 .
 .
--]]


__gfx__
00000000001cc100001cc100001cc100007667007777500000900900009009004444444488888888aaaaaaaa6606666000000000000000000000000000000000
0000000001111cc001111cc001111cc001111cc00055577009a0009009000a904555555488888888eaeaeaea6606666000000000000000000000000000000000
007007001111ccc11111ccc1777766671111ccc1555500079a000009900000a94555555488888888000000000660660600000000000000000000000000000000
00077000111ccc1c111ccc1c111ccc1c111ccc1c55007707aaaaa000000aaaaa4555555488888888000000006666606600000000000000000000000000000000
00077000111cc11c77766776111cc11c111cc11c00007707aaaaa000000aaaaa4555555488888888000000006606606600000000000000000000000000000000
0070070011111111111111111111111111111111777700079a000009900000a94555555488888888000000000066666000000000000000000000000000000000
00000000077777700111111001111110011111100000777009a0009009000a904555555488888888000000006660660600000000000000000000000000000000
00000000001111000011110000111100001111007777000000900900009009004444444488888888000000006660660600000000000000000000000000000000
00111100001111000011110000111100001111007777000000100100001001000099990000000000000000000000000000000000000000000000000000000000
01111c1001111c1001111c1001111c1001111c100000755001c0001001000c1009999a9000000000000000000000000000000000000000000000000000000000
111111c1111111c1111111c1111111c1111111c1775555571c000001100000c1999999a900000000000000000000000000000000000000000000000000000000
111ccccc1117cccc111c77cc111ccc77111ccccc55555707ccccc000000ccccc999aaaaa00000000000000000000000000000000000000000000000000000000
111ccccc111ccccc11166ccc111cc66c111cccc655007707ccccc000000ccccc999aaaaa00000000000000000000000000000000000000000000000000000000
111111c1111111c1111111c1111111c1111111c1777700071c000001100000c1999999a900000000000000000000000000000000000000000000000000000000
01111c1001111c1001111c1001111c1001111c100000777001c0001001000c1009999a9000000000000000000000000000000000000000000000000000000000
00111100001111000011110000111100001111007777000000100100001001000099990000000000000000000000000000000000000000000000000000000000
00000000001111000011110000111100001111007777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111100077777700111111001111110011111100000777000000000000000000000000000000000000000000000000000000000000000000000000000000000
01111c10111111111111111111111111111111117777000700000000000000000000000000000000000000000000000000000000000000000000000000000000
111111c1111cc11c77766776111cc11c111cc11c5500770700000000000000000000000000000000000000000000000000000000000000000000000000000000
111ccccc111ccc1c111ccc1c111ccc1c111ccc1c5555570700000000000000000000000000000000000000000000000000000000000000000000000000000000
111111c11111ccc11111ccc1777766671111ccc17755555700000000000000000000000000000000000000000000000000000000000000000000000000000000
01111c1001111cc001111cc001111cc001111cc00000755000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111100001cc100001cc100001cc100007667007777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111100001111000011110000111100005000007777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01111810011111100811111001181110055000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111181811111111181111111118111050000007777000700000000000000000000000000000000000000000000000000000000000000000000000000000000
11188888881118888888111818888811550000000000770700000000000000000000000000000000000000000000000000000000000000000000000000000000
11188888881118888888111818888811500000005000770700000000000000000000000000000000000000000000000000000000000000000000000000000000
11111181811111111181111111118111000000005557000700000000000000000000000000000000000000000000000000000000000000000000000000000000
01111810011111100811111001181110000000000555577000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111100001111000011110000111100000000007775500000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080800000000080808080808080808080808000000000808080808080800000000000000000000000a000008080808080808080808080808080808080
80808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080
800000000000000000000000000000000000000000000000000000000000008080000000000000000000000000a0008000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000080
80000000000000000000000000000000000000000000000000000000000000808000000000000000000000000000a08000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000080
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a08080000000000000000000000000a0008000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000080
8000000000000000000000000000000000000000000000000000000000000080800000000000000000000000a000008000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000080
80000000000000000000000000000000000000000000000000000000000000808000000000000000000000a00000008000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0a0a0a0a0a080000080
800000000000000000000000000000000000000000000000000000000000008080000000000000000000a0000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000080
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a080800000000000000000a000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000080
80000000000000000000000000000000000000000000000000000000000000808000000000000000a00000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000080
800000000000000000000000000000000000000000000000000000000000008080000000000000a0000000000000008000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0a0a0a0a0a080000080
8000000000000000000000000000000000000000000000000000000000000080800000000000a000000000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000080
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0808000000000a00000000000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000080
800000000000000000000000000000000000000000000000000000000000008080000000a0000000000000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000810000000000000000000000000080000080
8000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000008000000000000000000000000000000000
000000000000000000000000000000808000000000000000000000000000000000000000000000000000000000008080000000000000a0a0a0a0a0a080000080
80000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000008000710000000000000000000000008080
80000000000000000000000000808080800000000000000000000000000000008100000000000000000000000000808000000000000000000000000080000080
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0808080808080808080808080808080808080808080808080808080808080808080
80808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000b00000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000b00000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0800000000000000000000000000000000000b00000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000b08100000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000808080808080808080808080808080
808000000080808080808000000000a0a0a0a0a00000000000000000000000000000000000000000000000000000000000000000008080808080808080000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000080
8080000000808080808080000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0b0b00000000000000080
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0800000000000000000000000000000000000000000000000000000000000000080
8080000000808080808080000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0b0b00000000000000080
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000080
808090909080808080808000000000000000000000a0a0a00000000000000000000000000000000000000000000000000000000000b0b0b00000000000000080
80000000000000000000000000000000000000000000000000000000000000800080000000000000000000000000000000000000000000000000000000000080
8080909090808080808080000000000000000000000000000000000000000000000000000000000000000000000000000080808080b0b0b00000000000000080
80000000000000000000000000000000000000000000000000000000000000808080800000000000000000000000000000000000000000008100000000000080
80809090908080808080800000000000000000000000000000000000000000000000000000000000000000000000000000808080808080800000000000000080
80808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080
80809090908080808080808080808080808080808080808080808080808080808080909090808080808080808080909090808080808080808080808080808080
__gff__
0000000000000000383908b80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080909090808080808080808080808080808080808080808080808080808080000000000000000000000000000000000000000000000000000000000000008
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080800000000000000000000000000000000000000000000000000000000000008090909000000000000000000000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080800000000000000000000000000000000000000000000000000000000000008090900000000000000000000000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080800000a0a0a0a0a0a0a0a0a0a0a0a0808000000000000000000000000000008090000000000000909000000000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080809000000000000000000000000000808080808080800000808000000000008090000000008090909090808080000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000a0000080800000a0000000808090000000000000000000000000008080000000000000000000000000000080900000a0a00000909000000080000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080809080000000000000000000000000808000000000000000000000000000008090000000000000909000000080000090000000000000000000000000000000000000000000000000000000000000000
080000000b0b000000000b0b0000000808000000000000000000000000000008080a0a000000000000000000000a0a08080808080808000000080808080a0a0808000000000000000000000008080808090800000000000909000a0a080000090000000000000000000000000000000000000000000000000000000000000000
0800000000000a0a0a0a00000000000808000000000000000000000000000008080000000000000000000000000000080800000000000000000000000000000808000008000009090808090900000008090000000000000909000800000000090000000000000000000000000000000000000000000000000000000000000000
08000000000000000000000000000008080000000000000000000000000000080800000000000800000800000000000808000000000000000000000000000008080000080000000000000000000000080900000a0a00000909000800000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080800000000000000000000000000000808000008080808080808080808080808090000000000000909000808080808090000000000000000000000000000000000000000000000000000000000000000
080000000a0000000000000808080008080a0a0a0a0a0a000000000000000008080808000000000000000000000808080800000000000000000000000000080808000000000000000000000000000008090000000000000909000000000000090000000000000000000000000000000000000000000000000000000000000000
08000000000000000000000000000008080000000000000000000000000000080800000a0a0000000000000a0a0000080800000000000008080000000008080808000000000000000000000000000000000000000008080909000000000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000008080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000808080909090908080808000000000000000000000000000000000000000000000909000000000000090000000000000000000000000000000000000000000000000000000000000000
0800170000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000080808080808080808080808000008080808000008080800000000000000000000000909000000000000090000000000000000000000000000000000000000000000000000000000000000
0808080808080000000008080808080808080808080800000a0a000008080808080808080808090909090808080808080808080808080808080808080808080808080808080808090908080808080808080808080808080808080808000008080000000000000000000000000000000000000000000000000000000000000000
0808080808080000000008080808080808080808080800000000000008080808080808080808080808080808080808080000000000000000000000000000000000000000000000000000000000000000080808080808080808080808000008080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000000000000000000000000000000000008080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000000000000000000a0a0a0a0a0000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000008080808080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000000000000000000000000000000000008080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000080a000000000000000000000000000008080a00000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000000000000000000000000000000000000808000a00000000000000000000000008000000000000000000000000000000000000000000000000000000000000000008000000000000000a0a0a0a000000080000000000000000000000000000000000000000000000000000000000000000
080000000000080808080000000000000000000000000a0a0a0a000000000a080800000a0000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000000000000000000000000000000000008080000000a00000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000090900000000000000000000000000000808000000000a00000000000000000008000000000000000000000000000000000000000000000000000000000000000008000000000000000a0a0a0a000000080000000000000000000000000000000000000000000000000000000000000000
08000000000000000000000000000009090000000000000000000000000000080800000000000a0000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0800000a0a0000000000000a0a00000909000008080000000000000808000008080000000000000a00000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000090900000000000000000000000000000808000000000000000a00000000000008000000000000000000000000000000000000000000000000000000000000000008000000000000000a0a0a0a000000080000000000000000000000000000000000000000000000000000000000000000
08000000000000000000000000000009090000000000000000000000000000080800000000000000000a0000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000909000000000000000000000000000008080000000000000000000a00000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0808080808080a0a0a0a0808080808080808080808080a0a0a0a08080808080808000000000000000000000a000000080000000000000000000000000000000000000000000000000000000000000000080808080808080808080808080808080000000000000000000000000000000000000000000000000000000000000000
__sfx__
00020000022000220037250312502a250232501c2501725013250112500e2500c2500b25009250072500625004250032500225001250002500025000250252002520025200262002620026200262002620026200

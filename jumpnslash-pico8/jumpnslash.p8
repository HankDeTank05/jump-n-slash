pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--jump 'n' slash
--designed by joseph turzitti
--programmed by henry holman

#include debug.p8
#include player.p8
#include rooms.p8
#include sword.p8

debug_rooms = true
debug_player = true

f = 1 -- frame count

function _init()
	init_rooms()
	init_player()

	set_state_game()
end

function set_state_game()
	_update60 = update_game_state
	_draw = draw_game_state
end

function update_game_state()
	p1_update()
	update_room()
end

function draw_game_state()
	cls() -- clear screen

	draw_room(debug_rooms)
	p1_draw(debug_player)

	f += 1 -- increment frame counter
end

-->8
--tab 1: reference

--[[
sprite flags
------------

num | hex  | color  | meaning
---------------------------
 0  | 0x1  | red    | hurts player
 1  | 0x2  | orange |
 2  | 0x4  | yellow | 
 3  | 0x8  | green  | player can land on top of
 4  | 0x10 | blue   | player cannot pass horizontally thru sides
 5  | 0x20 | gray   | player cannot pass upwards thru bottom
 6  | 0x40 | pink   |
 7  | 0x80 | tan    |
]]
__gfx__
00000000001cc100001cc100001cc100007667007777500000000000000000004444444488888888aaaaaaaa0000000000000000000000000000000000000000
0000000001111cc001111cc001111cc001111cc00055577000000000000000004555555488888888eaeaeaea0000000000000000000000000000000000000000
007007001111ccc11111ccc1777766671111ccc15555000700000000000000004555555488888888000000000000000000000000000000000000000000000000
00077000111ccc1c111ccc1c111ccc1c111ccc1c5500770700000000000000004555555488888888000000000000000000000000000000000000000000000000
00077000111cc11c77766776111cc11c111cc11c0000770700000000000000004555555488888888000000000000000000000000000000000000000000000000
00700700111111111111111111111111111111117777000700000000000000004555555488888888000000000000000000000000000000000000000000000000
00000000077777700111111001111110011111100000777000000000000000004555555488888888000000000000000000000000000000000000000000000000
00000000001111000011110000111100001111007777000000000000000000004444444488888888000000000000000000000000000000000000000000000000
00111100001111000011110000111100001111007777000000000000000000000099990000000000000000000000000000000000000000000000000000000000
01111c1001111c1001111c1001111c1001111c100000755000000000000000000999989000000000000000000000000000000000000000000000000000000000
111111c1111111c1111111c1111111c1111111c17755555700000000000000009999998900000000000000000000000000000000000000000000000000000000
111ccccc1117cccc111c77cc111ccc77111ccccc5555570700000000000000009998888800000000000000000000000000000000000000000000000000000000
111ccccc111ccccc11166ccc111cc66c111cccc65500770700000000000000009998888800000000000000000000000000000000000000000000000000000000
111111c1111111c1111111c1111111c1111111c17777000700000000000000009999998900000000000000000000000000000000000000000000000000000000
01111c1001111c1001111c1001111c1001111c100000777000000000000000000999989000000000000000000000000000000000000000000000000000000000
00111100001111000011110000111100001111007777000000000000000000000099990000000000000000000000000000000000000000000000000000000000
00000000001111000011110000111100001111007777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111100077777700111111001111110011111100000777000000000000000000000000000000000000000000000000000000000000000000000000000000000
01111c10111111111111111111111111111111117777000700000000000000000000000000000000000000000000000000000000000000000000000000000000
111111c1111cc11c77766776111cc11c111cc11c5500770700000000000000000000000000000000000000000000000000000000000000000000000000000000
111ccccc111ccc1c111ccc1c111ccc1c111ccc1c5555570700000000000000000000000000000000000000000000000000000000000000000000000000000000
111111c11111ccc11111ccc1777766671111ccc17755555700000000000000000000000000000000000000000000000000000000000000000000000000000000
01111c1001111cc001111cc001111cc001111cc00000755000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111100001cc100001cc100001cc100007667007777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001111000011110000111100001111007777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011118100111111008111110011811100000777000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111111818111111111811111111181117777000700000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111888888811188888881118188888110000770700000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111888888811188888881118188888115000770700000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111111818111111111811111111181115557000700000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011118100111111008111110011811100555577000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001111000011110000111100001111007775500000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8080808080808080808080808080808080808080808080808080808080808080800000000000000000000000a000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000000000000000000000000000000000000000000000000000000000008080000000000000000000000000a0008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000808000000000000000000000000000a08000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a08080000000000000000000000000a0008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8000000000000000000000000000000000000000000000000000000000000080800000000000000000000000a000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000808000000000000000000000a00000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000000000000000000000000000000000000000000000000000000000008080000000000000000000a0000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a080800000000000000000a000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000808000000000000000a00000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000000000000000000000000000000000000000000000000000000000008080000000000000a0000000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8000000000000000000000000000000000000000000000000000000000000080800000000000a000000000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0808000000000a00000000000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000000000000000000000000000000000000000000000000000000000008080000000a0000000000000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
8000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000008000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0808080808080808080808080808080808000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
800000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a00000a0a0a0a0800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80808080808080808080808080808080808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000383908000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080800000000000000000000000000000000000000000000000000000000000008090909000000000000000000000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080800000000000000000000000000000000000000000000000000000000000008090900000000000000000000000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080800000a0a0a0a0a0a0a0a0a0a0a0a0808000000000000000000000000000008090000000000000909000000000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080809000000000000000000000000000808080808080800000808000000000008090000000008090909090808080000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000a0000080800000a0000000808090000000000000000000000000008080000000000000000000000000000080900000a0a00000909000000080000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080809080000000000000000000000000808000000000000000000000000000008090000000000000909000000080000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080a0a000000000000000000000a0a08080808080808000000080808080a0a0808000000000000000000000008080808090800000000000909000a0a080000090000000000000000000000000000000000000000000000000000000000000000
0800000000000a0a0a0a00000000000808000000000000000000000000000008080000000000000000000000000000080800000000000000000000000000000808000008000009090808090900000008090000000000000909000800000000090000000000000000000000000000000000000000000000000000000000000000
08000000000000000000000000000008080000000000000000000000000000080800000000000800000800000000000808000000000000000000000000000008080000080000000000000000000000080900000a0a00000909000800000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000080800000000000000000000000000000808000008080808080808080808080808090000000000000909000808080808090000000000000000000000000000000000000000000000000000000000000000
080000000a0000000000000808080008080a0a0a0a0a0a000000000000000008080808000000000000000000000808080800000000000000000000000000080808000000000000000000000000000008090000000000000909000000000000090000000000000000000000000000000000000000000000000000000000000000
08000000000000000000000000000008080000000000000000000000000000080800000a0a0000000000000a0a0000080800000000000008080000000008080808000000000000000000000000000000000000000008080909000000000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000008080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000808080909090908080808000000000000000000000000000000000000000000000909000000000000090000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080808080808080808080808000008080808000008080800000000000000000000000909000000000000090000000000000000000000000000000000000000000000000000000000000000
0808080808080000000008080808080808080808080800000a0a000008080808080808080808090909090808080808080808080808080808080808080808080808080808080808090908080808080808080808080808080808080808000008080000000000000000000000000000000000000000000000000000000000000000
0808080808080000000008080808080808080808080800000000000008080808080808080808080808080808080808080000000000000000000000000000000000000000000000000000000000000000080808080808080808080808000008080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000000000000000000000000000000000008080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000000000000000000a0a0a0a0a0000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000008080808080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000000000000000000000000000000000008080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000080a000000000000000000000000000008080a00000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000000000000000000000000000000000000808000a00000000000000000000000008000000000000000000000000000000000000000000000000000000000000000008000000000000000a0a0a0a000000080000000000000000000000000000000000000000000000000000000000000000
080000000000080808080000000000000000000000000a0a0a0a000000000a080800000a0000000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000000000000000000000000000000000008080000000a00000000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000090900000000000000000000000000000808000000000a00000000000000000008000000000000000000000000000000000000000000000000000000000000000008000000000000000a0a0a0a000000080000000000000000000000000000000000000000000000000000000000000000
08000000000000000000000000000009090000000000000000000000000000080800000000000a0000000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0800000a0a0000000000000a0a00000909000008080000000000000808000008080000000000000a00000000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
080000000000000000000000000000090900000000000000000000000000000808000000000000000a00000000000008000000000000000000000000000000000000000000000000000000000000000008000000000000000a0a0a0a000000080000000000000000000000000000000000000000000000000000000000000000
08000000000000000000000000000009090000000000000000000000000000080800000000000000000a0000000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0800000000000000000000000000000909000000000000000000000000000008080000000000000000000a00000000080000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000
0808080808080a0a0a0a0808080808080808080808080a0a0a0a08080808080808000000000000000000000a000000080000000000000000000000000000000000000000000000000000000000000000080808080808080808080808080808080000000000000000000000000000000000000000000000000000000000000000
